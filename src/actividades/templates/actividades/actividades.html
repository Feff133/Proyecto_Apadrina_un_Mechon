{% extends "Proyecto_apadrinar/base.html" %}

{% load static %}

{% block content %}
<html>

<head>

<style>
    h1 {text-align: center;}    
    p {text-align: center;}
        body{
            background-image:url('{% static "Proyecto_apadrinar/img/actividades.jpg"%}');
            background-repeat: no-repeat;
            background-size: cover;
        }

</style>

</head>

</html>

{% if "valido" in request.GET %}
    <div class="alert alert-primary" role="alert">
        Actividad creada exitosamente
    </div>

{% endif %}

{% if "completado" in request.GET %}
    <div class="alert alert-success" role="alert">
        Actividad completada exitosamente
    </div>

{% endif %}

<div class="container" style="text-align: center;">
    <a class="btn btn-success" href="{% url 'agendar' %}" role="button">Agendar actividad</a>
    <div class="row">

        {% for actividad in actividades %}
        
            
                <div class="col-md-3">
                    <div class="card" style="width: 100%;">
                        <div class="card-body" style="text-align: center;">

                            {% if user.persona_auth.tipo == 0 %}    

                                <p class="card-title"> Actividad: {{actividad.nombre}}</p>

                                <h7 class="card-title"> Actividad creada por: {{actividad.creada_por}}</h7>
    
                                <p class="card-text"> Estado: {{actividad.get_estado_display}}</p>
    
                                <p class="card-text">Descripcion: {{actividad.descripcion}}</p>
    
                                <p class="card-text">Fecha a realizar: {{actividad.fecha_agendada}}</p>

                                <p class="card-text">Hora a realizar: {{actividad.hora}}</p>

                                {% if actividad.estado == 0 %}

                                    <form action="{% url 'modificar' %}" method="post">
                                        {% csrf_token %}
                                        <input type="hidden" name="dato" value="{{ actividad.id }}">
                                        <input class="btn btn-warning" type="submit" value="Modificar actividad">
    
                                    </form>

                                    <form action="{% url 'completar' %}" method="post">
                                        {% csrf_token %}
                                        <input type="hidden" name="dato" value="{{ actividad.id }}">
                                        <input class="btn btn-success" type="submit" value="Completar actividad">
    
                                    </form>

                                {% endif %}
                                

                            {% elif user.persona_auth.tipo == 1%}

                                <p class="card-title"> Actividad: {{actividad.nombre}}</p>

                                <h7 class="card-title"> Actividad creada por: {{actividad.creada_por}}</h7>
    
                                <p class="card-text"> Estado: {{actividad.get_estado_display}}</p>
    
                                <p class="card-text">Descripcion: {{actividad.descripcion}}</p>
    
                                <p class="card-text">Fecha a realizar: {{actividad.fecha_agendada}}</p>

                                <p class="card-text">Hora a realizar: {{actividad.hora}}</p>

                                {% if actividad.estado == 0 %}
    
                                    <form action="{% url 'modificar' %}" method="post">
                                        {% csrf_token %}
                                        <input type="hidden" name="dato" value="{{ actividad.id }}">
                                        <input class="btn btn-warning" type="submit" value="Modificar actividad">
    
                                    </form>

                                    <form action="{% url 'completar' %}" method="post">
                                        {% csrf_token %}
                                        <input type="hidden" name="dato" value="{{ actividad.id }}">
                                        <input class="btn btn-success" type="submit" value="Completar actividad">
    
                                    </form>
                                    
                                {% endif %}

                            {% endif %}

    
                        </div>
                    </div>
                </div>
           
    
                
    
    
                
    
        {% endfor %}
        </div>
</div>

<div class="container">

</div>







{% endblock %}